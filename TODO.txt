FitCurveOutput
fit_plot (metodo)
plotta una densità di curve di best fit
fit_plot(x, f or CurveModel, par, cov or FitCurveOutput, n=100, axes=gca(), **kw)
**kw passed to axes.plot, but label is intercepted and added to one.
summary (metodo) e/o implementare __repr__
success (bool) dice se è andato tutto bene

CurveModel
verificare se il modello simbolico è del tipo p_i*h_i(x) (hessiana nulla)

util_format
opzione si=True per formattare come num2si
opzione errdig=(float)|'pdg' per scegliere le cifre dell'errore o usare il formato del PDG

_fit_curve_ev
sostituire conv_diff con epsrel e epsabs

fit_curve
opzione raise=bool per raisare se qualcosa non va bene, default True
supportare dx == 0 xor dy == 0
  odrpack: ifixx per le dx nulle, se tutte nulle fit_type=2.
           per le dy nulle non so.
  linodr: già supportato.
  ev: dx ok, dy bisogna sistemarle nel fit iniziale (metterne di più piccole delle altre? ignorarle?)
  leastsq, wleastsq: dx ignorato, dy nulle non supportate e basta.
linodr diventa molto instabile se non gli si da le derivate, è un bug della mia derivata discreta dfdx?
Nota: ribadisco che è instabile al punto da essere un bug, ogni volta che ci casca in mezzo la mia dfdx, anche con altri metodi. Magari sostituirla con numdifftools. Nota: numdifftools è lentissimo, provare prima ad aumentare il diff_step.
aggiungere px, pxcov a odrpack calcolandolo dopo il fit.
ml diventa instabile (comunque entro l'1% dei fit) con errori sulle x grossi e modello oscillante.
controllare che funzioni con x non array se dx is None
usare -2logL nel minimo come X^2, cioè lo prendo dall'uscita del minimizzatore

fit_curve_bootstrap
aggiungere la possibilità di usare sia media pesata che non producendo due figure
supportare pfix
Non mi torna che i fit abbiano un bias se aumento gli errori sulle x, ma non se aumento sulle y. Ho provato a vedere se era per il fatto che nelle medie pesate taglio la parte di covarianza delle x ma mettercela non ha risolto (comunque è giusto mettercela, aggiungere pxcov a odrpack). La verosimiglianza non dovrebbe avere il massimo in un punto diverso se uso x*, theta oppure y*, theta. La cosa su cui ho dubbio è la stima della covarianza con l'hessiana, magari quella dipende dalla parametrizzazione? Verificare.

fit_oversampling
non funziona con tutti i campioni uguali o quasi, bisogna usare metodi bayesiani (emcee perché non ha dipendenze ulteriori)

sembra esserci un problema con il print di ODRPACK, nel report finale sbaglia a scrivere gli errori, fare un bug report.
altro problema di ODRPACK: out.y != y + out.eps, è una cosa tutta calcolata dentro DODRC quindi non è un problema del wrapper. Si tratta comunque di differenze ragionevoli, può darsi che sia volutamente un'approssimazione sufficiente per non valutare una volta in più la funzione.
